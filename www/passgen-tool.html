<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Kubek - Minecraft Servers</title>

  <!-- Bootstrap and Shards -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/shards.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/shards.min.css">

  <!-- Others -->
  <script src="js/jquery-3.6.0.min.js"></script>
  <script src="js/popper.min.js"></script>
  <link rel="stylesheet" href="css/animate.min.css" />
  <link rel="stylesheet" type="text/css" href="css/toastify.min.css">
  <script type="text/javascript" src="js/toastify-js.js"></script>
  <script src="js/sweetalert2.all.min.js"></script>
  <script src="js/progressbar.min.js"></script>

  <!-- Custom -->
  <script src="js/app.js"></script>
  <link rel="stylesheet" href="css/styles.css">

  <!-- Fonts and icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="mainLayout">
    <div class="menu">
      <div class="fc">
        <img src="assets/logo.svg" width="200px">
        <center>
          <p style="margin-top: 4px; width: max-content; height: min-content;" class="kubekVersion"></p>
        </center>

        <ul class="nav flex-column nav-pills nav-justified">
          <li class="nav-item">
            <a class="nav-link" href="/">{{servers}}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/settings.html">{{settings}}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/passgen-tool.html">{{passgen}}</a>
          </li>
        </ul>
      </div>

      <div class="fc">

      </div>
    </div>
    <div class="layout" style="padding: 16px;">
      <p style="font-size: 28pt; font-weight: 700;">{{passgen}}</p>
      <p style="font-size: 18pt;">{{passgenDesc}}</p>
      <span id="pgl">{{passgenLength}}</span>
      <select class="custom-select passlength">
        <option value=8>8</option>
        <option value=16>16</option>
        <option value=24>24</option>
        <option value=32>32</option>
        <option value=64>64</option>
        <option value=128>128</option>
        <option value=256>256</option>
        <option value=512>512</option>
        <option value=4096>{{passgenNL}}</option>
      </select>
      <button class="btn btn-primary btn-lg" style="margin-top: 8px;">{{start}}</button>
      <progress min=0 max=100 value=0 style="display: none;"></progress>
    </div>
  </div>
</body>

<script>
  var mx = getRandomInt(2000);
  var my = getRandomInt(2000);
  var code = "";
  var maxcodelength;
  var specialSymbols = ["*", "&", "_", "-", "#", "$", "@", "?", "."];

  function getRandomInt(max) {
    return Math.floor(Math.random() * max);
  }

  String.prototype.replaceAt = function (index, replacement) {
    return this.substr(0, index) + replacement + this.substr(index + replacement.length);
  }

  $(document).ready(function () {
    $(".kubekVersion").load("/kubek/version");
    $(".btn").click(function () {
      maxcodelength = $(".passlength option:selected").val();
      $("progress").show();
      $(".passlength").hide();
      $(".btn").hide();
      $("#pgl").hide();
      var imint = setInterval(function () {
        if ($("progress").val() == 100) {
          basecode = btoa(code).substr(0, maxcodelength);
          for (var i = 0; i < basecode.length; i++) {
            rnd = getRandomInt(20);
            if (rnd <= 2) {
              basecode = basecode.replaceAt(i, specialSymbols[getRandomInt(specialSymbols.length)]);
            }
          }
          $("progress").hide();
          $(".layout").append(
            '<span style="font-size: 16pt; font-weight: 500;">{{passgenYC}}</span>'
            );
          $(".layout").append("<textarea style='width: 100%;' autofocus readonly wrap='hard'>" + basecode + "</textarea>");
          clearInterval(imint);
        } else {
          if (Math.random() == 0) {
            code = code + my + getRandomInt(2593) + mx;
          } else {
            code = code + mx + getRandomInt(1414) + my;
          }
          $("progress").val($("progress").val() + 1);
        }
      }, 50);
    });

    $(document).mousemove(function (event) {
      mx = event.pageX;
      my = event.pageY;
    });
  });
</script>

<style>
  select, textarea {
    background: rgb(43, 53, 63) !important;
    border: none !important;
    outline: none !important;
    color: white !important;
  }

  textarea {
    border-radius: 4px;
    height: 50%;
  }
</style>